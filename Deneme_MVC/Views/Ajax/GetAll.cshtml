<h1>Ajax deneme</h1>
<div class="panel panel-primary">
    <div class="panel-heading">
        Student Data From API
    </div>
    <div class="panel-body">
        <table class="table table-bordered" id="hospitalTableBody">
            <tr>
                <th>Hastane Id</th>
                <th>Hastane Adı</th>
                <th>Adress</th>
                
            </tr>
        </table>
    </div>
</div>

<button onclick="fnc()">Liste</button>
<button onclick="Add()">Ekle</button>

<p class="container">
    <h2>Hastane Record</h2>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal" onclick="clearTextBox();">
        Add New Hastane
    </button><br /><br />
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Address</th>
            </tr>
        </thead>
        <tbody class="tbody">
            <!-- Employee records will be populated here -->
        </tbody>
    </table>
</p>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 class="modal-title" id="myModalLabel">Add Hastane</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="Id">ID</label>
                        <input type="text" class="form-control" id="Id" placeholder="Id" disabled="disabled" />
                    </div>
                    <div class="form-group">
                        <label for="Name">Name</label>
                        <input type="text" class="form-control" id="Name" placeholder="Name" />
                    </div>
                    <div class="form-group">
                        <label for="Adress">Adres</label>
                        <input type="text" class="form-control" id="Address" placeholder="Address" />
                    </div>
                    
                </form>
            </div>
            
        </div>
    </div>
</div>

@* <div class="modal-body">
    <form>
        <div class="form-group">
            <label for="">ID</label>
            <input type="text" class="form-control" id="Id" placeholder="Id" disabled="disabled" />
        </div>
        <div class="form-group">
            <label for="Name">Name</label>
            <input type="text" class="form-control" id="Name" placeholder="Name" />
        </div>
        <div class="form-group">
            <label for="Age">Age</label>
            <input type="text" class="form-control" id="Address" placeholder="Age" />
        </div>
        
    </form>
</div> *@
<script>
    

    function fnc() {
        console.log("calıstı");
        $.ajax({
            type: "get",
            url: "https://localhost:7133/api/Hastaneler/getall",
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                console.log("calıstı2");
                // Veriye doğru şekilde erişmek için 'data' kullanılmalıdır
                $.each(data, function (i, item) {

                    var rows = "<tr>" + "<td id =Id>" + item["id"] +
                        "</td>" +
                        "<td id =Name>" + item["name"] + "</td>"
                    "<td id =Address>" + item["adress"] + "</td>" +
                        "</tr>";
                    $("#hospitalTableBody").append(rows);
                })
            error: function (data) {
                alert(data.responseText);
            }
        });
    }

    function Add() {
        
        var empObj = {
            Id: $('#Id').val(),
            Name: $('#Name').val(),
            Address: $('#Address').val()
            
        };
        $.ajax({
            url: "https://localhost:7133/api/Hastaneler/add",
            data: JSON.stringify(empObj),
            type: "POST",
            contentType: "application/json",
            dataType: "json",
            success: function (result) {
                
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }

</script>
